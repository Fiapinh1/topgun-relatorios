<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Programa√ß√£o de Trabalho - Drone</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: radial-gradient(ellipse at 70% 30%, #1e304b  0%, #181a16 100%);
      min-height: 100vh;
      margin: 0;
      position: relative;
      overflow-x: hidden;
      color: #090909;
    }

    .drone-icon {
      position: fixed;
      z-index: 0;
      opacity: 0.15;
      animation: float 6s ease-in-out infinite;
    }
    
    .drone-icon i {
      font-size: 4rem;
      color: #34d399;
    }

    .drone-1 {
      top: 5%;
      left: 5%;
    }

    .drone-2 {
      bottom: 5%;
      right: 5%;
      animation-delay: 1.5s;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(5deg); }
      50% { transform: translateY(-15px) rotate(-5deg); }
    }

    .container {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.08);
      position: relative;
      z-index: 1;
    }

    h2 {
      color: #0b410d;
      text-align: center;
      margin-bottom: 20px;
      font-family: 'Orbitron', sans-serif;
    }

    label {
      display: block;
      margin-top: 15px;
      color: #2f361f;
      font-weight: 500;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #3e4824;
      border-radius: 6px;
      background-color: #f1f5f9;
      font-size: 1rem;
      box-sizing: border-box;
    }

    .separator {
      border: none;
      border-top: 2px dashed #34d399;
      margin: 20px 0;
      opacity: 0.5;
    }

    .btn {
      margin-top: 20px;
      padding: 12px 16px;
      background-color: #1e304b;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      width: 100%;
      transition: background 0.3s;
    }

    .btn:hover {
      background-color: #2a4e3a;
    }

    .botao-copiar {
      background: linear-gradient(90deg, #070902 0%, #0cb3ab 100%);
      color: #fff;
      font-size: 1.1em;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(59,130,246,0.08);
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      margin-top: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 16px 0;
    }

    .botao-copiar:active {
      background: linear-gradient(90deg, #2563eb 0%, #3b82f6 100%);
      transform: scale(0.98);
    }

    pre {
      background: #b7e73c2e;
      padding: 15px;
      white-space: pre-wrap;
      word-wrap: break-word;
      border-radius: 8px;
      font-family: 'Segoe UI', sans-serif;
      font-size: 1rem;
      margin-top: 20px;
    }

    /* Toast de feedback */
    #toast {
      display: none;
      position: fixed;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      color: #fff;
      padding: 14px 28px;
      border-radius: 8px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.15);
      font-size: 1rem;
      z-index: 9999;
      transition: opacity 0.3s;
    }

    #toast.show {
      display: block;
      opacity: 1;
    }

    /* Bot√µes de voltar */
    .btn-voltar {
      background-color: #0e131c;
      margin-bottom: 20px;
    }

    .btn-voltar:hover {
      background-color: #0e131c;
    }

    .btn-voltar-rodape {
      background-color: #0e131c;
      margin-top: 8px;
    }
    
    .btn-voltar-rodape:hover {
      background-color: #0e131c;
    }

    .observacoes {
    width: 100%;
    padding: 10px;
      margin-top: 5px;
      border: 1px solid #3e4824;
      border-radius: 6px;
      background-color: #f1f5f9;
      font-size: 1rem;
      box-sizing: border-box;
      resize: vertical;
      min-height: 60px;
      font-family: 'Segoe UI', Arial, sans-serif;
    }

    /* Container de fazendas */
    .fazenda-container {
      margin-top: 20px;
      padding: 15px;
      border: 1px dashed #ccc;
      border-radius: 8px;
      position: relative;
    }

    .fazenda-container h3 {
      margin-top: 0;
      color: #2d3748;
      font-size: 1rem;
    }

    .remove-fazenda {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #f56565;
      color: white;
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    @media (max-width: 600px) {
      .container {
        margin: 15px;
        padding: 15px;
      }
      
      #toast {
        width: 90%;
        text-align: center;
      }

      
    }
  </style>
</head>
<body>
  <!-- √çcones de drone animados -->
  <div class="drone-icon drone-1">
    <i data-lucide="drone"></i>
  </div>
  <div class="drone-icon drone-2">
    <i data-lucide="quadcopter"></i>
  </div>

  <!-- Toast de feedback -->
  <div id="toast">
    <i data-lucide="check-circle"></i>
    <span>Relat√≥rio copiado com sucesso!</span>
  </div>

  <div class="container">
    <!-- Bot√£o Voltar no topo -->
    <button class="btn btn-voltar" onclick="window.location.href='index.html'">
      <i data-lucide="arrow-left"></i> Voltar
    </button>
    
    <h2><i data-lucide="drone"></i> PROGRAMA√á√ÉO DE TRABALHO - TOPGUN PULVERIZA√á√ïES </h2>
    
    <label>Data para aplica√ß√£o:</label>
    <input type="date" id="data_aplicacao">
    
    <label>Estado:</label>
    <select id="estado" onchange="carregarUnidades()">
      <option value="">Selecione o estado</option>
      <option value="SP">S√£o Paulo (SP)</option>
      <option value="MG">Minas Gerais (MG)</option>
    </select>
    
    <label>Unidade:</label>
    <select id="unidade">
      <option value="">Selecione primeiro o estado</option>
    </select>
    
    <label>Frente:</label>
    <select id="frente">
      <option value="">Selecione a frente</option>
      <option value="1">Frente 1</option>
      <option value="2">Frente 2</option>
      <option value="3">Frente 3</option>
      <option value="4">Frente 4</option>
      <option value="5">Frente 5</option>
      <option value="6">Frente 6</option>
      <option value="7">Frente 7</option>
      <option value="8">Frente 8</option>
    </select>

    <label>Piloto:</label>
    <select id="piloto">
      <option value="">Selecione o Piloto</option>
      <option value="Maicon Silva">Maicon Silva</option>
      <option value="Matheus Pias">Matheus Pias</option>
      <option value="Felipe Santos">Felipe Santos</option> 
      <option value="Alexandre Alves">Alexandre Alves</option>
      <option value="Juan Pablo">Juan Pablo</option>
      <option value="Juliano Fernandes">Juliano Fernandes</option>
      <option value="David Costa">David Costa</option>
      <option value="Pedro Augusto">Pedro Augusto</option>
      <option value="Ygor Lucas">Ygor Lucas</option>
    </select>

    <label>Auxiliar:</label>
    <select id="auxiliar">
      <option value="">Selecione o auxiliar</option>
      <option value="Antonio Soares">Antonio Soares</option>
      <option value="Jefferson Lopes">Jefferson Lopes</option>
      <option value="Phellipe Gomes ">Phellipe Gomes</option> 
      <option value="Abdias Neto">Abdias Neto</option>
      <option value="Ailton Gabriel">Ailton Gabriel</option>
    </select>
    
    <label>Drone:</label>
    <select id="drone">
      <option value="">Selecione o drone</option>
      <option value="DJI Agras T20">DJI Agras T20</option>
      <option value="DJI Agras T25">DJI Agras T25</option>
      <option value="DJI Agras T30">DJI Agras T30</option>
      <option value="DJI Agras T40">DJI Agras T40</option>
      <option value="DJI Agras T50">DJI Agras T50</option>
    </select>
    
    <label>Objetivo:</label>
    <select id="objetivo">
      <option value="">Selecione o objetivo</option>
      <option value="√Årea Total">Aplica√ß√£o - √Årea Total</option>
      <option value="Cata√ß√£o">Aplica√ß√£o - Cata√ß√£o</option>
      <option value="Mapeamento">Mapeamento</option>
      <option value="Monitoramento">Monitoramento</option>
      <option value="Pulveriza√ß√£o">Pulveriza√ß√£o</option>
    </select>
    
    <label>Tipo de Produto:</label>
    <select id="produto">
      <option value="">Selecione o produto</option>
      <option value="Herbicida">Herbicida</option>
      <option value="Inseticida">Inseticida</option>
      <option value="Fungicida">Fungicida</option>
      <option value="Fertilizante">Fertilizante</option>
    </select>
    
    <hr class="separator">
      
    <!-- Container de fazendas -->
    <div id="fazendas-container">
      <div class="fazenda-item">
        <div class="fazenda-container">
          <h3>Fazenda 1</h3>
          <label>üìãOS da Fazenda:</label>
          <input class="os-fazenda" placeholder="N√∫mero da OS">
          
          <label>Fazenda:</label>
          <input class="fazenda" placeholder="Nome da fazenda">
          
          <label>C√≥digo:</label>
          <input class="codigo" placeholder="C√≥digo da fazenda">

          <label>√Årea da OS (ha):</label>
          <input class="area-os" placeholder="√Årea em hectares" type="number">

          <label>Observa√ß√µes:</label>
          <textarea class="observacoes" placeholder="Observa√ß√µes sobre a fazenda" rows="2"></textarea>
        </div>
      </div>
    </div>
    
    <button class="btn" onclick="adicionarFazenda()">
      <i data-lucide="plus"></i> Adicionar Fazenda
    </button>
    
    <button class="btn" onclick="gerarRelatorio()"><i data-lucide="file-text"></i> Gerar Relat√≥rio</button>
    
    <pre id="relatorio">Preencha os campos e clique em gerar relat√≥rio.</pre>

    <button class="btn botao-copiar" id="copiarBtn" onclick="copiarRelatorio()">
      <i data-lucide="copy"></i> Copiar Relat√≥rio
    </button>
    
    <!-- Bot√£o Voltar no rodap√© -->
    <button class="btn btn-voltar-rodape" onclick="window.location.href='index.html'">
      <i data-lucide="arrow-left"></i> Voltar para P√°gina Inicial
    </button>
  </div>

  <script>
    // Dados das unidades
    const unidadesPorEstado = {
      "MG": [
        "Delta - Delta",
        "Delta - Volta Grande",
        "Floretadora - Santa Cec√≠lia (Jo√£o Pinheiro - MG)",
        "Parque de Bioenergia Lagoa da Prata (Lagoa da Prata - MG)"
      ],
      "SP": [
        "Usina Gasa (Andradina - SP)",
        "Usina Rafard (Rafard - SP)",
        "Usina S√£o Francisco (Elias Fausto - SP)",
        "Usina Barra Bonita (Barra Bonita - SP)",
        "Usina Costa Pinto (Piracicaba - SP)",
        "Usina Leme (Leme - SP)",
        "Usina Destivale (Ara√ßatuba - SP)",
        "Usina Mundial (Mirand√≥polis - SP)",
        "Usina Ipaussu (Ipaussu - SP)",
        "Usina Diamante (Ja√∫ - SP)",
        "Usina Univalem (Valparaiso - SP)",
        "Usina Ben√°lcool (Bento de Abreu - SP)"
      ]
    };

    // Carrega unidades conforme estado selecionado
    function carregarUnidades() {
      const estado = document.getElementById("estado").value;
      const selectUnidade = document.getElementById("unidade");
      
      selectUnidade.innerHTML = '<option value="">Selecione a unidade</option>';
      
      if (estado && unidadesPorEstado[estado]) {
        unidadesPorEstado[estado].forEach(unidade => {
          const option = document.createElement("option");
          option.value = unidade;
          option.textContent = unidade;
          selectUnidade.appendChild(option);
        });
      }
    }

    // Adiciona nova fazenda
    function adicionarFazenda() {
      const container = document.getElementById("fazendas-container");
      const newFazenda = document.createElement("div");
      newFazenda.className = "fazenda-item";
      const fazendaNumber = container.children.length + 1;
      
      newFazenda.innerHTML = `
        <div class="fazenda-container">
          <button class="remove-fazenda" onclick="this.parentElement.parentElement.remove()">
            <i data-lucide="x"></i>
          </button>
          <h3>Fazenda ${fazendaNumber}</h3>
          <label>OS da Fazenda:</label>
          <input class="os-fazenda" placeholder="N√∫mero da OS espec√≠fica">
          
          <label>Fazenda:</label>
          <input class="fazenda" placeholder="Nome da fazenda">
          
          <label>C√≥digo:</label>
          <input class="codigo" placeholder="C√≥digo da fazenda">

          <label>√Årea da Os (ha):</label>
          <input class="area-os" type="number" placeholder="√Årea da OS em hectares">

          <label>Observa√ß√µes:</label>
          <textarea class="observacoes" placeholder="Observa√ß√µes sobre a fazenda" rows="2"></textarea>
        </div>
      `;
      container.appendChild(newFazenda);
      lucide.createIcons();
    }

    // Gera o relat√≥rio
    function gerarRelatorio() {
      const dataInput = document.getElementById("data_aplicacao").value;

      // Converte a data para formato brasileiro
      let dataFormatada = "";
      if (dataInput) {
        const partes = dataInput.split("-");
        dataFormatada = `${partes[2]}/${partes[1]}/${partes[0]}`;
      }
     
      const unidade = document.getElementById("unidade").value;
      const frente = document.getElementById("frente").value;
      const piloto = document.getElementById("piloto").value;
      const auxiliar = document.getElementById("auxiliar").value;
      const drone = document.getElementById("drone").value;
      const objetivo = document.getElementById("objetivo").value;
      const produto = document.getElementById("produto").value;
      
      // Coleta todas as fazendas
      const fazendaItems = document.querySelectorAll('.fazenda-item');
      const fazendas = [];
      
      fazendaItems.forEach(item => {
        const osFazenda = item.querySelector('.os-fazenda').value;
        const fazenda = item.querySelector('.fazenda').value;
        const codigo = item.querySelector('.codigo').value;
        const area = item.querySelector('.area-os').value;
        const observacoes = item.querySelector('.observacoes').value;
        if (osFazenda || fazenda || codigo || area || observacoes) {
          fazendas.push({ osFazenda, fazenda, codigo, area, observacoes });
        }
      });

      let relatorio = `üìÖ *Programa√ß√£o para aplica√ß√£o:* ${dataFormatada}\n\n`;
      relatorio += ` *Unidade:* ${unidade}\n`;
      relatorio += ` *Frente:* ${frente}\n`;
      relatorio += ` *Piloto:* ${piloto}\n`;
      relatorio += ` *Auxiliar:* ${auxiliar}\n`;
      relatorio += ` *Drone:* ${drone}\n`;
      relatorio += ` *Objetivo:* ${objetivo}\n`;
      relatorio += ` *Tipo de Produto:* ${produto}\n`;
      relatorio += `_________________\n\n`;
      
      
      // Adiciona cada fazenda ao relat√≥rio
      fazendas.forEach((fazenda, index) => {
        relatorio += `*üìãOS:* ${fazenda.osFazenda}\n`;
        relatorio += `*Fazenda:* ${fazenda.fazenda}\n`;
        relatorio += `*C√≥digo:* ${fazenda.codigo}\n`;
        relatorio += `*√Årea da OS (ha):* ${fazenda.area} ha\n`;
        
        // S√≥ adiciona observa√ß√µes se n√£o estiver vazio
    if (fazenda.observacoes && fazenda.observacoes.trim() !== '') {
      relatorio += `*Observa√ß√µes:* ${fazenda.observacoes}\n`;
    }
 
        // Adiciona separador se n√£o for a √∫ltima fazenda
        if (index < fazendas.length - 1) {
          relatorio += `_________________\n\n`;
        }
      });

      document.getElementById("relatorio").textContent = relatorio;
    }

    // Fun√ß√£o para mostrar o toast
    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.innerHTML = `<i data-lucide="check-circle"></i> <span>${msg || 'Relat√≥rio copiado com sucesso!'}</span>`;
      toast.style.display = 'block';
      toast.style.opacity = '1';
      lucide.createIcons();
      
      setTimeout(() => {
        toast.style.opacity = '0';
        setTimeout(() => toast.style.display = 'none', 300);
      }, 2000);
    }

    // Fun√ß√£o para copiar com fallback
    function fallbackCopyTextToClipboard(text) {
      const textArea = document.createElement("textarea");
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      
      try {
        document.execCommand('copy');
        showToast();
      } catch (err) {
        showToast('Erro ao copiar. Selecione o texto e pressione Ctrl+C.');
      }
      
      document.body.removeChild(textArea);
    }

    // Fun√ß√£o principal de c√≥pia
    function copiarRelatorio() {
      const texto = document.getElementById("relatorio").textContent;
      
      if (navigator.clipboard) {
        navigator.clipboard.writeText(texto)
          .then(() => showToast())
          .catch(() => fallbackCopyTextToClipboard(texto));
      } else {
        fallbackCopyTextToClipboard(texto);
      }
    }

    // Inicializa√ß√£o
    lucide.createIcons();
  </script>
</body>
</html>
