<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Programa칞칚o de Trabalho - Drone</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: radial-gradient(ellipse at 70% 30%, #1e304b  0%, #181a16 100%);
      min-height: 100vh;
      margin: 0;
      position: relative;
      overflow-x: hidden;
      color: #090909;
    }

    .drone-icon {
      position: fixed;
      z-index: 0;
      opacity: 0.15;
      animation: float 6s ease-in-out infinite;
    }
    
    .drone-icon i {
      font-size: 4rem;
      color: #34d399;
    }

    .drone-1 {
      top: 5%;
      left: 5%;
    }

    .drone-2 {
      bottom: 5%;
      right: 5%;
      animation-delay: 1.5s;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(5deg); }
      50% { transform: translateY(-15px) rotate(-5deg); }
    }

    .container {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.08);
      position: relative;
      z-index: 1;
    }

    h2 {
      color: #1f2937;
      text-align: center;
      margin-bottom: 20px;
      font-family: 'Orbitron', sans-serif;
    }

    label {
      display: block;
      margin-top: 15px;
      color: #2f361f;
      font-weight: 500;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #3e4824;
      border-radius: 6px;
      background-color: #f1f5f9;
      font-size: 1rem;
      box-sizing: border-box;
    }

    .separator {
      border: none;
      border-top: 2px dashed #34d399;
      margin: 20px 0;
      opacity: 0.5;
    }

    .btn {
      margin-top: 20px;
      padding: 15px 16px;
      background-color: #1e304b;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      width: 100%;
      transition: background 0.3s;
      min-height: 50px;
    }

    .btn:hover {
      background-color: #2a4e3a;
    }

    .btn-copiar {
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
    }

    .btn-copiar:hover {
      background: linear-gradient(90deg, #1e40af 0%, #1e3a8a 100%);
    }

    pre {
      background: #b7e73c2e;
      padding: 15px;
      white-space: pre-wrap;
      word-wrap: break-word;
      border-radius: 8px;
      font-family: 'Segoe UI', sans-serif;
      font-size: 1rem;
      margin-top: 20px;
    }

    /* Toast de notifica칞칚o */
    #toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: #1e293b;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #toast.show {
      opacity: 1;
    }

    @media (max-width: 600px) {
      .container {
        margin: 15px;
        padding: 15px;
      }
      
      #toast {
        width: 90%;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <!-- 칈cones de drone animados -->
  <div class="drone-icon drone-1">
    <i data-lucide="drone"></i>
  </div>
  <div class="drone-icon drone-2">
    <i data-lucide="quadcopter"></i>
  </div>

  <!-- Toast de notifica칞칚o -->
  <div id="toast">
    <i data-lucide="check-circle"></i>
    <span>Relat칩rio copiado para a 치rea de transfer칡ncia!</span>
  </div>

  <div class="container">
    <h2><i data-lucide="calendar-days"></i> PROGRAMA칂츾O DE TRABALHO</h2>
    
    <label>Data para aplica칞칚o:</label>
    <input type="date" id="data_aplicacao">
    
    <label>Estado:</label>
    <select id="estado" onchange="carregarUnidades()">
      <option value="">Selecione o estado</option>
      <option value="SP">S칚o Paulo (SP)</option>
      <option value="MG">Minas Gerais (MG)</option>
    </select>
    
    <label>Unidade:</label>
    <select id="unidade">
      <option value="">Selecione primeiro o estado</option>
    </select>
    
    <label>Frente:</label>
    <select id="frente">
      <option value="">Selecione a frente</option>
        <option value="1">Frente 1</option>
        <option value="2">Frente 2</option>
        <option value="3">Frente 3</option>
        <option value="4">Frente 4</option>
        <option value="5">Frente 5</option>
        <option value="6">Frente 6</option>
        <option value="7">Frente 7</option>
        <option value="8">Frente 8</option>
    <select>

    <label>Piloto:</label>
    <select id="piloto">
      <option value="">Selecione o Piloto</option>
        <option value="Maicon Silva">Maicon Silva</option>
        <option value="Matheus Pias">Matheus Pias</option>
        <option value="Felipe Santos">Felipe Santos</option> 
        <option value="Alexandre Alves">Alexandre Alves</option>
        <option value="Juan Pablo">Juan Pablo</option>
        <option value="Juliano Fernandes">Juliano Fernandes</option>
        <option value="David Costa">David Costa</option>
        <option value="Pedro Augusto">Pedro Augusto</option>
        <option value="Ygor Lucas">Ygor Lucas</option>
    </select>

    <label>Auxiliar:</label>
    <select id="auxiliar">
      <option value="">Selecione o auxiliar</option>
       <option value="Antonio Soares">Antonio Soares</option>
       <option value="Jefferson Lopes">Jefferson Lopes</option>
       <option value="Phellipe Gomes ">Phellipe Gomes</option> 
       <option value="Abdias Neto">Abdias Neto</option>
       <option value="Ailton Gabriel">Ailton Gabriel</option>
    </select>
    
    <label>Drone:</label>
    <select id="drone">
      <option value="">Selecione o drone</option>
      <option value="DJI Agras T20">DJI Agras T20</option>
      <option value="DJI Agras T25">DJI Agras T25</option>
      <option value="DJI Agras T30">DJI Agras T30</option>
      <option value="DJI Agras T40">DJI Agras T40</option>
      <option value="DJI Agras T50">DJI Agras T50</option>
    </select>
    
    <label>Objetivo:</label>
    <select id="objetivo">
      <option value="">Selecione o objetivo</option>
      <option value="츼rea Total">Aplica칞칚o - 츼rea Total</option>
      <option value="Cata칞칚o">Aplica칞칚o - Cata칞칚o</option>
      <option value="Mapeamento">Mapeamento</option>
      <option value="Monitoramento">Monitoramento</option>
      <option value="Pulveriza칞칚o">Pulveriza칞칚o</option>
    </select>
    
    <label>Tipo de Produto:</label>
    <select id="produto">
      <option value="">Selecione o produto</option>
      <option value="Herbicida">Herbicida</option>
      <option value="Inseticida">Inseticida</option>
      <option value="Fungicida">Fungicida</option>
      <option value="Fertilizante">Fertilizante</option>
    </select>
    
    <hr class="separator">
    
    <label>OS:</label>
    <input id="os" placeholder="N칰mero da OS">
    
    <label>Fazenda:</label>
    <input id="fazenda" placeholder="Nome da fazenda">
    
    <label>C칩digo:</label>
    <input id="codigo" placeholder="C칩digo da fazenda">
    
    <button class="btn" onclick="gerarRelatorio()"><i data-lucide="file-text"></i> Gerar Relat칩rio</button>
    
    <pre id="relatorio">Preencha os campos e clique em gerar relat칩rio.</pre>

    <button class="btn btn-copiar" id="copiarBtn" onclick="copiarRelatorio()"><i data-lucide="copy"></i> Copiar Relat칩rio</button>
  </div>

  <script>
    // Dados das unidades
    const unidadesPorEstado = {
      "MG": [
        "Delta - Delta",
        "Delta - Volta Grande",
        "Floretadora - Santa Cec칤lia (Jo칚o Pinheiro - MG)",
        "Parque de Bioenergia Lagoa da Prata (Lagoa da Prata - MG)"
      ],
      "SP": [
        "Usina Gasa (Andradina - SP)",
        "Usina Rafard (Rafard - SP)",
        "Usina S칚o Francisco (Elias Fausto - SP)",
        "Usina Barra Bonita (Barra Bonita - SP)",
        "Usina Costa Pinto (Piracicaba - SP)",
        "Usina Leme (Leme - SP)",
        "Usina Destivale (Ara칞atuba - SP)",
        "Usina Mundial (Mirand칩polis - SP)",
        "Usina Ipaussu (Ipaussu - SP)",
        "Usina Diamante (Ja칰 - SP)",
        "Usina Univalem (Valparaiso - SP)",
        "Usina Ben치lcool (Bento de Abreu - SP)"
      ]
    };

    // Carrega unidades conforme estado selecionado
    function carregarUnidades() {
      const estado = document.getElementById("estado").value;
      const selectUnidade = document.getElementById("unidade");
      
      selectUnidade.innerHTML = '<option value="">Selecione a unidade</option>';
      
      if (estado && unidadesPorEstado[estado]) {
        unidadesPorEstado[estado].forEach(unidade => {
          const option = document.createElement("option");
          option.value = unidade;
          option.textContent = unidade;
          selectUnidade.appendChild(option);
        });
      }
    }

    // Gera o relat칩rio
    function gerarRelatorio() {
      const dataInput = document.getElementById("data_aplicacao").value;

      // Converte a data para formato brasileiro
      let dataFormatada = "";
      if (dataInput) {
        const partes = dataInput.split("-");
        dataFormatada = `${partes[2]}/${partes[1]}/${partes[0]}`;
      }
     
      const unidade = document.getElementById("unidade").value;
      const frente = document.getElementById("frente").value;
      const piloto = document.getElementById("piloto").value;
      const auxiliar = document.getElementById("auxiliar").value;
      const drone = document.getElementById("drone").value;
      const objetivo = document.getElementById("objetivo").value;
      const produto = document.getElementById("produto").value;
      const os = document.getElementById("os").value;
      const fazenda = document.getElementById("fazenda").value;
      const codigo = document.getElementById("codigo").value;

      let relatorio = `游늰 *Programa칞칚o para aplica칞칚o:* ${dataFormatada}\n\n`;
      relatorio += ` *Unidade:* ${unidade}\n`;
      relatorio += ` *Frente:* ${frente}\n`;
      relatorio += ` *Piloto:* ${piloto}\n`;
      relatorio += ` *Auxiliar:* ${auxiliar}\n`;
      relatorio += ` *Drone:* ${drone}\n`;
      relatorio += ` *Objetivo:* ${objetivo}\n`;
      relatorio += ` *Tipo de Produto:* ${produto}\n`;
      relatorio += `_________________\n\n`;
      relatorio += `游늶 *OS:* ${os}\n`;
      relatorio += `*Fazenda:* ${fazenda}\n`;
      relatorio += `*C칩digo:* ${codigo}\n`;

      document.getElementById("relatorio").textContent = relatorio;
    }

    // Fun칞칚o principal de c칩pia
    function copiarRelatorio() {
      const texto = document.getElementById("relatorio").textContent;
      
      if (copiarParaAreaTransferencia(texto)) {
        mostrarToast();
      } else {
        // Fallback para dispositivos que n칚o suportam c칩pia autom치tica
        selecionarTextoParaCopiar();
      }
    }

    // Fun칞칚o universal para copiar texto
    function copiarParaAreaTransferencia(texto) {
      // Tenta usar a API moderna primeiro
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(texto)
          .then(() => true)
          .catch(() => false);
        return true;
      }
      
      // M칠todo alternativo para outros navegadores
      try {
        const textarea = document.createElement('textarea');
        textarea.value = texto;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        
        textarea.select();
        textarea.setSelectionRange(0, 99999); // Para mobile
        
        const success = document.execCommand('copy');
        document.body.removeChild(textarea);
        
        return success;
      } catch (err) {
        return false;
      }
    }

    // Fallback para selecionar o texto manualmente
    function selecionarTextoParaCopiar() {
      const relatorio = document.getElementById("relatorio");
      const range = document.createRange();
      range.selectNode(relatorio);
      window.getSelection().removeAllRanges();
      window.getSelection().addRange(range);
      
      try {
        document.execCommand('copy');
        mostrarToast();
      } catch (err) {
        alert("Selecione o texto abaixo e pressione Copiar:\n\n" + relatorio.textContent);
      }
      
      window.getSelection().removeAllRanges();
    }

    // Mostra o toast de notifica칞칚o
    function mostrarToast() {
      const toast = document.getElementById('toast');
      const btn = document.getElementById('copiarBtn');
      
      // Feedback visual no bot칚o
      btn.innerHTML = '<i data-lucide="check"></i> Copiado!';
      btn.style.backgroundColor = '#4CAF50';
      
      // Mostra o toast
      toast.classList.add('show');
      
      // Restaura ap칩s 3 segundos
      setTimeout(() => {
        toast.classList.remove('show');
        btn.innerHTML = '<i data-lucide="copy"></i> Copiar Relat칩rio';
        btn.style.backgroundColor = '#1e304b';
        lucide.createIcons(); // Atualiza 칤cones
      }, 3000);
    }

    // Inicializa os 칤cones
    lucide.createIcons();
  </script>
</body>
</html>
